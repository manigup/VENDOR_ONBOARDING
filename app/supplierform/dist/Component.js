sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","sp/fiori/supplierform/model/models","sap/ui/core/BusyIndicator","sap/m/MessageBox","sap/ui/model/Filter","./formatter"],function(e,t,a,i,s,r,o){"use strict";return e.extend("sp.fiori.supplierform.Component",{metadata:{manifest:"json"},async init(){e.prototype.init.apply(this,arguments);try{const e=await this.getDataFromServer();this.handleData(e);this.getRouter().initialize()}catch(e){i.hide();this.getRouter().navTo("invalidUrl",{status:""});this.getRouter().initialize()}},async getDataFromServer(){return new Promise((e,t)=>{const a=jQuery.sap.getUriParameters().get("id");let i="";if(window.location.href.includes("launchpad")){i="https://impautosuppdev.launchpad.cfapps.ap10.hana.ondemand.com/ed7b03c3-9a0c-46b0-b0de-b5b00d211677.onboarding.spfiorisupplierform-0.0.1"}const s=i+`/v2/odata/v4/catalog/VenOnboard?$filter=VendorId eq ${a}`;$.ajax({type:"GET",contentType:"application/json",url:s,dataType:"json",success:e,error:t})})},handleData(e){const t=this.getModel("request");t.setData(e.d.results[0]);t.refresh(true);if(e.d.results[0].Status==="SBS"){this.getRouter().navTo("invalidUrl",{status:"submit"});return}const a=new Date;const i=new Date(e.d.results[0].VenValidTo);if(a>=i){s.error("Link Expired");return}const r=jQuery.sap.getUriParameters().get("id");if(e.d.results[0].VendorId===r){this.getRouter().navTo("RouteView1",{id:r})}else{this.getRouter().navTo("invalidUrl",{status:""})}}})});