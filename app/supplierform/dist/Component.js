sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","sp/fiori/supplierform/model/models","sap/ui/core/BusyIndicator","sap/m/MessageBox","sap/ui/model/Filter","./formatter"],function(e,t,i,r,s,a,o){"use strict";return e.extend("sp.fiori.supplierform.Component",{metadata:{manifest:"json"},async init(){e.prototype.init.apply(this,arguments);try{const e=await this.getDataFromServer();this.handleData(e);this.getRouter().initialize()}catch(e){r.hide();this.getRouter().navTo("invalidUrl",{status:""});this.getRouter().initialize()}},async getDataFromServer(){return new Promise((e,t)=>{const i=jQuery.sap.getUriParameters().get("id");let r="";if(window.location.href.includes("launchpad")){r=window.location.href.split("/index")[0]}const s=r+`/v2/odata/v4/catalog/VenOnboard?$filter=VendorId eq ${i}`;$.ajax({type:"GET",contentType:"application/json",url:s,dataType:"json",success:e,error:t})})},handleData(e){const t=this.getModel("request");t.setData(e.d.results[0]);t.refresh(true);if(e.d.results[0].Status==="SBS"){this.getRouter().navTo("invalidUrl",{status:"submit"});return}const i=new Date;const r=new Date(e.d.results[0].VenValidTo);if(i>=r){s.error("Link Expired");return}const a=jQuery.sap.getUriParameters().get("id");if(e.d.results[0].VendorId===a){this.getRouter().navTo("RouteView1",{id:a})}else{this.getRouter().navTo("invalidUrl",{status:""})}}})});