sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/ValidateException","sap/m/StandardListItem","sap/ui/model/SimpleType"],function(e,t,a,r){"use strict";return e.extend("sp.fiori.vendoronboarding.controller.BaseController",{getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},onF4HelpRequest:function(e){this.f4Source=e.getSource();this.oTemplate=new a({title:"{Supplier}",description:"{SupplierName}"});this.f4Help("Select Vendor","/SupplierHelpSet")},f4Help:function(e,t){var a=sap.ui.xmlfragment("sp.fiori.vendoronboarding.fragment.F4Help",this);this.getView().addDependent(a);sap.ui.getCore().byId("F4Help").setTitle(e);sap.ui.getCore().byId("F4Help").bindAggregation("items",{path:t,filters:[new sap.ui.model.Filter("Bukrs","EQ",sessionStorage.getItem("compCode")||"1000")],template:this.oTemplate});a.open()},onF4HelpSearch:function(e){var t=e.getParameter("value");var a=e.getSource().getBinding("items").getPath();var r=a.includes("?search")?a.split("?search")[0]:a.split("&search")[0];sap.ui.getCore().byId("F4Help").bindAggregation("items",{path:r,filters:[new sap.ui.model.Filter("Bukrs","EQ",sessionStorage.getItem("compCode")||"1000")],parameters:{custom:{search:t}},template:this.oTemplate})},onF4HelpConfirm:function(e){e.getSource().destroy();this.f4Source.setValue(e.getParameter("selectedItem").getTitle());sap.ui.getCore().byId("venName").setValue(e.getParameter("selectedItem").getDescription())},onF4HelpClose:function(e){e.getSource().destroy()},onDialogCancel:function(e){e.getSource().getParent().destroy()},onDialogEscapeHandler:function(e){e.reject()},onPopOverAfterClose:function(e){e.getSource().destroy()},onPopOverClosePress:function(e){e.getSource().getParent().getParent().destroy()},customEMailType:r.extend("email",{formatValue:function(e){return e},parseValue:function(e){return e},validateValue:function(e){var a=/^\w+[\w-+\.]*\@\w+([-\.]\w+)*\.[a-zA-Z]{2,}$/;if(!e.match(a)){throw new t("'"+e+"' is not a valid e-mail address")}}}),validateFields:function(){this.validateResults=[];sap.ui.getCore().byId("createDialog").getControlsByFieldGroupId("required").forEach(e=>{console.log(e.getMetadata().getElementName());switch(e.getMetadata().getElementName()){case"sap.m.Select":this.showError(e,"selectedKey",e.getSelectedKey());break;case"sap.m.Input":case"sap.m.TextArea":this.showError(e,"value",e.getValue());break}});if(this.validateResults.every(e=>e===true))return true;else return false},showError:function(e,t,a){if(e.getVisible()){try{var r=e.getBinding(t);r.getType().validateValue(a);e.setValueState("None");this.validateResults.push(true)}catch(t){e.setValueState("Error");e.setValueStateText(t.message);this.validateResults.push(false)}}else{e.setValueState("None")}},generateVendorNo:function(){let e="7800000000";const t=this.getView().getModel("DataModel").getData();if(t.length>0){e=(parseInt(t[t.length-1].Vendor)+1).toString()}return e}})});